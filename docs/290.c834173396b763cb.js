"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[290],{5290:(g,m,o)=>{o.r(m),o.d(m,{CartComponent:()=>v});var u=o(6814),p=o(1120),C=o(310),t=o(4769),_=o(6286);function f(n,h){if(1&n){const e=t.EpF();t.TgZ(0,"div",10)(1,"div",11),t._UZ(2,"img",12),t.qZA(),t.TgZ(3,"div",13)(4,"div")(5,"h3",14),t._uU(6),t.ALo(7,"cuttext"),t.qZA(),t.TgZ(8,"p",15),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.TgZ(11,"button",16,17),t.NdJ("click",function(){const c=t.CHM(e).$implicit,a=t.MAs(12),d=t.oxw(2);return t.KtG(d.removeItem(c.product._id,a))}),t._UZ(13,"i",18),t._uU(14,"Remove"),t.qZA()(),t.TgZ(15,"div")(16,"button",19,20),t.NdJ("click",function(){const c=t.CHM(e).$implicit,a=t.MAs(17),d=t.MAs(22),b=t.oxw(2);return t.KtG(b.changeCount(c.count-1,c.product._id,a,d))}),t._uU(18," - "),t.qZA(),t.TgZ(19,"span"),t._uU(20),t.qZA(),t.TgZ(21,"button",19,21),t.NdJ("click",function(){const c=t.CHM(e).$implicit,a=t.MAs(17),d=t.MAs(22),b=t.oxw(2);return t.KtG(b.changeCount(c.count+1,c.product._id,a,d))}),t._uU(23," + "),t.qZA()()()()}if(2&n){const e=h.$implicit;t.xp6(2),t.Q6J("src",e.product.imageCover,t.LSH),t.xp6(4),t.Oqu(t.xi3(7,4,e.product.title,3)),t.xp6(3),t.hij("Price : ",t.xi3(10,7,e.price,"EGP "),""),t.xp6(11),t.hij(" ",e.count," ")}}const s=function(n){return["/payment",n]};function l(n,h){if(1&n){const e=t.EpF();t.TgZ(0,"section",2)(1,"div",3)(2,"h1",4),t._uU(3,"Shop Cart"),t.qZA(),t.TgZ(4,"button",5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.clear())}),t._uU(5,"Clear All"),t.qZA()(),t.TgZ(6,"p",6),t._uU(7),t.ALo(8,"currency"),t.qZA(),t.YNc(9,f,24,10,"div",7),t.TgZ(10,"button",8),t._uU(11,"Online Payment "),t._UZ(12,"img",9),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(7),t.hij("Total Price ",t.xi3(8,3,e.cartDetails.totalCartPrice,"EGP ")," "),t.xp6(2),t.Q6J("ngForOf",e.cartDetails.products),t.xp6(1),t.Q6J("routerLink",t.VKq(6,s,e.cartDetails._id))}}function x(n,h){1&n&&(t.TgZ(0,"div",22),t._UZ(1,"i",23),t.TgZ(2,"h2",24),t._uU(3," What are you waiting for? Start shopping and fill your cart with goodies..."),t.qZA(),t._UZ(4,"i",25),t.qZA())}let v=(()=>{class n{constructor(e,r){this._CartService=e,this.Renderer2_=r,this.cartDetails=null}ngOnInit(){this._CartService.getCartUser().subscribe({next:e=>{console.log(e),this.cartDetails=e.data}})}removeItem(e,r){this.Renderer2_.setAttribute(r,"disabled","true"),this._CartService.removeCartItem(e).subscribe({next:i=>{console.log(i),this.cartDetails=i.data,this.Renderer2_.removeAttribute(r,"disabled"),this._CartService.cartNumber.next(i.numOfCartItems)},error:i=>{this.Renderer2_.removeAttribute(r,"disabled")}})}changeCount(e,r,i,c){e>=1?(this.Renderer2_.setAttribute(i,"disabled","true"),this.Renderer2_.setAttribute(c,"disabled","true"),this._CartService.updateCartCount(r,e).subscribe({next:a=>{this.cartDetails=a.data}})):this._CartService.removeCartItem(r).subscribe({next:a=>{this.cartDetails=a.data,this.Renderer2_.removeAttribute(i,"disabled"),this.Renderer2_.removeAttribute(c,"disabled"),this._CartService.cartNumber.next(a.numOfCartItems)}})}clear(){this._CartService.clearCart().subscribe({next:e=>{"success"===e.message&&(this.cartDetails=null,this._CartService.cartNumber.next(0))}})}static#t=this.\u0275fac=function(r){return new(r||n)(t.Y36(_.N),t.Y36(t.Qsj))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-cart"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","w-75 mx-auto shadow rounded bg-main-light p-3 mb-3",4,"ngIf","ngIfElse"],["msg",""],[1,"w-75","mx-auto","shadow","rounded","bg-main-light","p-3","mb-3"],[1,"d-flex","justify-content-between","align-items-center"],[1,"h2"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"text-main"],["class","row border-bottom py-2",4,"ngFor","ngForOf"],[1,"main-btn","mt-3",3,"routerLink"],["width","30","src","./assets/images/visaa.png","alt","visa logo"],[1,"row","border-bottom","py-2"],[1,"col-md-1"],["item.product.title","",1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","justify-content-between","align-items-center"],[1,"h6"],[1,"text-main","small","mb-0"],[1,"btn-remove","m-0","p-0","text-red",3,"click"],["btnRemove",""],[1,"fas","fa-trash-can"],[1,"btn","btn-sm","border-success",3,"click"],["btn1",""],["btn2",""],[1,"d-flex","align-items-baseline","justify-content-center","p-0","m-0","vh-100"],[1,"fa-solid","fa-bookmark","fa-xl","Icon1"],[1,"text-center","px-2","mt-5","color-gradient","paragraph"],[1,"fa-solid","fa-bookmark","fa-xl","Icon2"]],template:function(r,i){if(1&r&&(t.YNc(0,l,13,8,"section",0),t.YNc(1,x,5,0,"ng-template",null,1,t.W1O)),2&r){const c=t.MAs(2);t.Q6J("ngIf",i.cartDetails)("ngIfElse",c)}},dependencies:[u.ez,u.sg,u.O5,u.H9,p.rH,C.r],styles:[".paragraph[_ngcontent-%COMP%]{background:linear-gradient(to right,#3FA55C,#B3AC49);-webkit-background-clip:text;background-clip:text;-webkit-background-clip:text!important;-webkit-text-fill-color:transparent!important;font-size:25px;font-family:Righteous,cursive}.Icon1[_ngcontent-%COMP%]{color:#3fa55c;font-size:30px}.Icon2[_ngcontent-%COMP%]{color:#b3ac49;font-size:30px}.btn-remove[_ngcontent-%COMP%]{border:unset}"]})}return n})()},6286:(g,m,o)=>{o.d(m,{N:()=>t});var u=o(5619),p=o(4769),C=o(9862);let t=(()=>{class _{constructor(s){this._HttpClient=s,this.baseUrl="https://ecommerce.routemisr.com/api/v1/",this.cartNumber=new u.X(0)}addToCart(s){return this._HttpClient.post(this.baseUrl+"cart",{productId:s})}getCartUser(){return this._HttpClient.get(this.baseUrl+"cart")}removeCartItem(s){return this._HttpClient.delete(this.baseUrl+`cart/${s}`)}updateCartCount(s,l){return this._HttpClient.put(this.baseUrl+`cart/${s}`,{count:l})}clearCart(){return this._HttpClient.delete(this.baseUrl+"cart")}checkOut(s,l){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${s}?url=http://localhost:420`,{shippingAddress:l})}static#t=this.\u0275fac=function(l){return new(l||_)(p.LFG(C.eN))};static#e=this.\u0275prov=p.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}return _})()}}]);